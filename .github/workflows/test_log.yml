# This workflow will build a Swift project
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-swift

name: Central Workflow

on:
  pull_request:
    types:
      - closed
    branches:
      - main

jobs:
  route-labels:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Log PR Details
        run: |
          echo "PR Title: ${{ github.event.pull_request.title }}"
          echo "Labels: ${{ github.event.pull_request.labels[*].name }}"
          echo "${{ github.event }}"

      - name: Check and Dispatch for Label1
        run: |
            echo "Label 1 is detected"
        if: contains(github.event.pull_request.labels.*.name, 'label1')
        uses: ./github/workflows/label1_cd.yml

      - name: Check and Dispatch for Label2
        run: |
            echo "Label 2 is detected"
        if: contains(github.event.pull_request.labels.*.name, 'label2')
        uses: ./github/workflows/label2_cd.yml
